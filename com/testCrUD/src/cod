package com.javarush.task.task17.task1710;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.*;
import java.text.DateFormat;
/*
CRUD
*/

public class Solution {
    public static List<Person> allPeople = new ArrayList<>();
    static {
        allPeople.add(Person.createMale("Иванов Иван", new Date()));  //сегодня родился    id=0
        allPeople.add(Person.createMale("Петров Петр", new Date()));  //сегодня родился    id=1
    }
    public static void main(String[] args) throws ParseException {
        //start here - начни тут
     if(args.length>0) {
         String s1 = args[0];
         if(s1.equals("-c")){
             String s2 = args[1];
             String s3 = args[2];
             String s4 = args[3];
             Date oldDate;
             DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy", Locale.ENGLISH);
             oldDate = formatter.parse(s4);
             if(Objects.equals(s3, "м")) { allPeople.add(Person.createMale(s2, oldDate)); }
             else
             if(Objects.equals(s3, "ж")) { allPeople.add(Person.createFemale(s2, oldDate)); }
             System.out.println(allPeople.indexOf(Person.class));
             //System.out.println(allPeople.indexOf(args[1]));
         }else
             if(s1.equals("-d")){
             int id = Integer.parseInt(args[1]);
             allPeople.get(id).     setName(null);
             allPeople.get(id).      setSex(null);
             allPeople.get(id).setBirthDate(null);
         }else
             if(s1.equals("-i")){
                 String stringSex="";
                 DateFormat newFormatter = new SimpleDateFormat("dd-MMM-yyyy", Locale.ENGLISH);
                 int id = Integer.parseInt(args[1]);
                 Person person = allPeople.get(id);
                 if(Objects.equals(person.getSex(), Sex.MALE)) stringSex = "м";
                 else if(Objects.equals(person.getSex(), Sex.FEMALE)) stringSex = "ж";
                 System.out.println(person.getName()+" "+stringSex+" "+newFormatter.format(person.getBirthDate()));
             }else
                 if(s1.equals("-u")){
                     int id = Integer.parseInt(args[1]);
                     allPeople.get(id).setName(args[2]);
                     DateFormat dateFormat =new SimpleDateFormat("dd/MM/yy", Locale.ENGLISH);
                     allPeople.get(id).setBirthDate(dateFormat.parse(args[4]));
                     if (args[3].equals("м")) allPeople.get(id).setSex(Sex.MALE);
                     else if (args[3].equals("ж")) allPeople.get(id).setSex(Sex.FEMALE);
                 }
       /*  Person person = allPeople.get(0);//Тест вывода:
             String stringSex1 ="-";
         if(Objects.equals(person.getSex(), Sex.MALE)) stringSex1 = "м";
         else
         if(Objects.equals(person.getSex(), Sex.FEMALE)) stringSex1 = "ж";
        System.out.println(person.getName()+" "+stringSex1+" "+new SimpleDateFormat("dd-MM-yy",Locale.ENGLISH).format(person.getBirthDate()));
       */
     }
    }
}
